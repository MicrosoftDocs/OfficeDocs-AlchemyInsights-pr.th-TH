---
title: ข้อผิดพลาดของแอปพลิเคชัน
ms.author: v-aiyengar
author: AshaIyengar21
manager: dansimp
ms.date: 01/25/2021
ms.audience: Admin
ms.topic: article
ms.service: o365-administration
ROBOTS: NOINDEX, NOFOLLOW
localization_priority: Normal
ms.collection: Adm_O365
ms.custom:
- "9004342"
- "7841"
ms.openlocfilehash: 2ef90b54ce222a06740e05891fabe87b6565cb14
ms.sourcegitcommit: ba3118b7ad5e02756d0e5c2113245090f54370af
ms.translationtype: MT
ms.contentlocale: th-TH
ms.lasthandoff: 01/25/2021
ms.locfileid: "49984656"
---
# <a name="application-errors"></a>ข้อผิดพลาดของแอปพลิเคชัน

กำลังมองหาข้อมูลเกี่ยวกับ **รหัสข้อผิดพลาด AADSTS** ที่ส่งกลับจาก Azure active Directory (azure AD) token SERVICE (STS) ใช่หรือไม่ อ่าน [รหัสข้อผิดพลาดการรับรองความถูกต้องของ AZURE AD และการตรวจสอบ](https://docs.microsoft.com/azure/active-directory/develop/reference-aadsts-error-codes) เพื่อค้นหาคำอธิบายข้อผิดพลาด AADSTS การแก้ไขและการแก้ไขปัญหาบางอย่างที่แนะนำ

ข้อผิดพลาดการตรวจสอบอาจเป็นผลมาจากปัญหาต่างๆที่แตกต่างกันมากที่สุดที่สร้างข้อผิดพลาด๔๐๑หรือ๔๐๓ ตัวอย่างเช่นต่อไปนี้สามารถนำไปสู่การตรวจสอบข้อผิดพลาดทั้งหมด:

- [ขั้นตอนการซื้อโทเค็นการเข้าถึง](https://docs.microsoft.com/azure/active-directory/develop/reference-aadsts-error-codes)ที่ไม่ถูกต้อง 
- [ขอบเขตสิทธิ์](https://docs.microsoft.com/azure/active-directory/develop/active-directory-v2-scopes)ที่ได้รับการกำหนดค่าไม่ดี 
- การขาดความ [ยินยอม](https://docs.microsoft.com/azure/active-directory/develop/active-directory-devhowto-multi-tenant-overview#understanding-user-and-admin-consent)

เมื่อต้องการแก้ไขข้อผิดพลาดการตรวจสอบทั่วไปให้ลองทำตามขั้นตอนที่ระบุไว้ด้านล่างที่ตรงกับข้อผิดพลาดที่คุณได้รับอย่างใกล้ชิดที่สุด อาจมีการนำไปใช้มากกว่าหนึ่งรายการ

**ข้อผิดพลาด๔๐๑ที่ไม่ได้รับอนุญาต: โทเค็นของคุณถูกต้องหรือไม่**

ตรวจสอบให้แน่ใจว่าแอปพลิเคชันของคุณกำลังนำเสนอโทเค็นการเข้าถึงที่ถูกต้องไปยัง Microsoft Graph เป็นส่วนหนึ่งของการร้องขอ ข้อผิดพลาดนี้มักจะหมายความว่าโทเค็นการเข้าถึงอาจหายไปในส่วนหัวของการร้องขอการรับรองความถูกต้องของ HTTP หรือโทเค็นไม่ถูกต้องหรือหมดอายุแล้ว เราขอแนะนำให้คุณใช้ [ไลบรารีการรับรองความถูกต้องของ Microsoft (MSAL)](https://docs.microsoft.com/azure/active-directory/develop/msal-overview) สำหรับการซื้อโทเค็นการเข้าถึง นอกจากนี้ข้อผิดพลาดนี้อาจเกิดขึ้นถ้าคุณพยายามใช้โทเค็นการเข้าถึงที่ได้รับมอบสิทธิ์ให้กับบัญชี Microsoft ส่วนบุคคลเพื่อเข้าถึง API ที่สนับสนุนบัญชีผู้ใช้ที่ทำงานหรือโรงเรียน (บัญชีผู้ใช้ขององค์กรเท่านั้น)

**ข้อผิดพลาด๔๐๓ต้องห้าม: คุณได้เลือกชุดสิทธิ์ที่ถูกต้องหรือไม่**

ตรวจสอบว่าคุณได้ร้องขอชุดของสิทธิ์ที่ถูกต้องโดยยึดตาม Microsoft Graph APIs การโทรด้วยแอปของคุณ แนะนำสิทธิ์การใช้งานที่มีสิทธิ์น้อยที่สุดจะมีให้ในหัวข้อวิธีการอ้างอิงของ Microsoft Graph API ทั้งหมด นอกจากนี้สิทธิ์เหล่านั้นต้องได้รับอนุญาตให้แอปพลิเคชันโดยผู้ใช้หรือผู้ดูแลระบบ การให้สิทธิ์ตามปกติเกิดขึ้นผ่านหน้าความยินยอมหรือโดยการให้สิทธิ์โดยใช้ใบรับรองการลงทะเบียนแอปพลิเคชันของ Azure Portal จากใบมีด **การตั้งค่า** สำหรับแอปพลิเคชันให้คลิกสิทธิ์ **ที่****จำเป็น** จากนั้นคลิกสิทธิ์ในการให้สิทธิ์

- [สิทธิ์ของ Microsoft Graph](https://docs.microsoft.com/graph/permissions-reference) 
- [การทำความเข้าใจเกี่ยวกับสิทธิ์และความยินยอมของ Azure AD](https://docs.microsoft.com/azure/active-directory/develop/v2-permissions-and-consent) 

**ข้อผิดพลาด๔๐๓ Forbidden: แอปของคุณได้รับโทเค็นเพื่อให้ตรงกับสิทธิ์ที่เลือกหรือไม่**

ตรวจสอบให้แน่ใจว่าชนิดของสิทธิ์ที่ร้องขอหรือให้ตรงกับชนิดของโทเค็นการเข้าถึงที่แอปของคุณได้รับ คุณอาจจะร้องขอและให้สิทธิ์ของแอปพลิเคชันแต่ใช้โทเค็นการไหลโค้ดแบบโต้ตอบแทนที่จะเป็นโทเค็นการไหลของข้อมูลประจำตัวของไคลเอ็นต์หรือร้องขอและให้สิทธิ์ที่ได้รับมอบสิทธิ์แต่การใช้โทเค็นการไหลของข้อมูลประจำตัวของไคลเอ็นต์แทนที่

- [รับสิทธิ์การเข้าถึงในนามของผู้ใช้และสิทธิ์ที่ได้รับมอบสิทธิ์](https://docs.microsoft.com/graph/auth_v2_user) 
- [Azure AD v 2.0-OAuth ๒.๐การไหลของรหัสการอนุญาต](https://docs.microsoft.com/azure/active-directory/develop/v2-oauth2-auth-code-flow) 
- [รับสิทธิ์การเข้าถึงโดยไม่มีผู้ใช้ (บริการดีมอน) และสิทธิ์ของแอปพลิเคชัน](https://docs.microsoft.com/graph/auth_v2_service) 
- [การไหลของข้อมูลประจำตัวของไคลเอ็นต์ของ Azure AD v 2.0-OAuth ๒.๐](https://docs.microsoft.com/azure/active-directory/develop/v2-oauth2-client-creds-grant-flow) 

**ข้อผิดพลาด๔๐๓ต้องห้าม: การตั้งค่ารหัสผ่านใหม่**

ในขณะนี้ยังไม่มีสิทธิ์การใช้งานของดีมอนริการสิทธิ์บริการที่อนุญาตให้รีเซ็ตรหัสผ่านของผู้ใช้ APIs เหล่านี้จะได้รับการสนับสนุนโดยใช้การทำงานของโค้ดที่ได้รับมอบหมายแบบโต้ตอบกับผู้ดูแลระบบที่ลงชื่อเข้าใช้เท่านั้น

- [สิทธิ์ของ Microsoft Graph](https://docs.microsoft.com/graph/permissions-reference)

**๔๐๓ Forbidden: ผู้ใช้มีสิทธิ์เข้าถึงและได้รับสิทธิ์การใช้งานหรือไม่**

สำหรับขั้นตอนของรหัสที่ได้รับมอบหมาย Microsoft Graph จะประเมินถ้าการร้องขอได้รับอนุญาตตามสิทธิ์ที่ได้รับจากแอปและสิทธิ์ที่ผู้ใช้ที่ลงชื่อเข้าใช้มี โดยทั่วไปแล้วข้อผิดพลาดนี้จะระบุว่าผู้ใช้ไม่ได้มีสิทธิ์เพียงพอที่จะดำเนินการคำขอหรือผู้ใช้ไม่ได้รับสิทธิ์การใช้งานสำหรับข้อมูลที่กำลังเข้าถึง เฉพาะผู้ใช้ที่มีสิทธิ์หรือสิทธิ์การใช้งานที่จำเป็นสามารถทำให้การร้องขอเสร็จเรียบร้อยแล้ว

**ห้าม๔๐๓: คุณเลือก API ของทรัพยากรที่ถูกต้องหรือไม่**

บริการ API เช่น Microsoft Graph จะตรวจสอบว่าการอ้างสิทธิ์ aud (ผู้ชม) ในโทเค็นการเข้าถึงที่ได้รับตรงกับค่าที่คาดไว้สำหรับตัวเองและถ้าไม่ได้ผลลัพธ์จะส่งผลให้เกิดข้อผิดพลาดในการห้าม๔๐๓ ข้อผิดพลาดทั่วไปที่เกิดขึ้นในข้อผิดพลาดนี้กำลังพยายามใช้โทเค็นที่ได้รับมาสำหรับ Azure AD Graph APIs, Outlook APIs หรือ Api ของ SharePoint/OneDrive เพื่อเรียกใช้ Microsoft Graph (หรือในทางกลับกัน) ตรวจสอบให้แน่ใจว่าแอป (หรือขอบเขต) แอปของคุณได้รับโทเค็นสำหรับการจับคู่ API ที่มีการโทรหาแอป

**๔๐๐ไม่มีการร้องขอหรือ๔๐๓ห้ามผู้ใช้ให้สอดคล้องกับนโยบายการเข้าถึงแบบมีเงื่อนไขขององค์กร (CA) ของพวกเขาหรือไม่**

โดยยึดตามนโยบาย CA ขององค์กรผู้ใช้ที่เข้าถึงทรัพยากร Microsoft Graph ผ่านแอปของคุณอาจท้าทายสำหรับข้อมูลเพิ่มเติมที่ไม่มีอยู่ในโทเค็นการเข้าถึงแอปของคุณที่ได้รับจากที่เดิม ในกรณีนี้แอปของคุณจะได้รับ๔๐๐ที่มีข้อผิดพลาด *interaction_required* ระหว่างการซื้อโทเค็นการเข้าถึงหรือ๔๐๓ที่มีข้อผิดพลาด *insufficient_claims* เมื่อโทรหา Microsoft Graph ในทั้งสองกรณีการตอบสนองข้อผิดพลาดมีข้อมูลเพิ่มเติมที่สามารถนำเสนอไปยังจุดสิ้นสุดการอนุญาตเพื่อท้าทายผู้ใช้สำหรับข้อมูลเพิ่มเติม (เช่นการรับรองความถูกต้องแบบหลายปัจจัยหรือการลงทะเบียนอุปกรณ์)

- [การจัดการความท้าทายในการเข้าถึงตามเงื่อนไขโดยใช้ MSAL ](https://docs.microsoft.com/azure/active-directory/develop/msal-handling-exceptions#conditional-access-and-claims-challenges)
- [คำแนะนำสำหรับนักพัฒนาสำหรับการเข้าถึงแบบมีเงื่อนไขของ Azure Active Directory](https://docs.microsoft.com/azure/active-directory/develop/conditional-access-dev-guide)
